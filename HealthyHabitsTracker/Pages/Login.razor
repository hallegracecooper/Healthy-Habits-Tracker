@page "/login"
@attribute [AllowAnonymous]
@inject NavigationManager Nav

@code {
    [Parameter][SupplyParameterFromQuery] public string? returnUrl { get; set; }

    protected override void OnInitialized()
    {
        var target = string.IsNullOrWhiteSpace(returnUrl) ? "/dashboard" : returnUrl!;
        var encoded = Uri.EscapeDataString(target);
        Nav.NavigateTo($"/Identity/Account/Login?returnUrl={encoded}", forceLoad: true);
    }
}